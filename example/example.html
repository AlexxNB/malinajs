<script lang="javascript">
    let todos = [];
    let name = '';
    let active = null;

    function enter(e) {
        if(e.keyCode !== 13) return;
        e.preventDefault();
        add();
    };

    function add() {
        if(!name) return;
        todos.push({
            name: name,
            done: false
        });
        name = '';
        active = null;
    }

    function remove(todo) {
        todos.splice(todos.indexOf(todo), 1);
    }

    function select(todo) {
        if(active === todo) active = null;
        else active = todo;
    }
</script>

<input type="text" on:keydown={enter($event)} bind:value={name} />
<button on:click={add()}>Add</button>
{name}

<ul>
    {#each todos as todo}
    <li class:active={todo === active}>
        <input type="checkbox" bind:checked={todo.done} />
        <span on:click={select(todo)} class:inactive={todo.done} style="cursor: pointer;">{this.index}: {todo.name}</span>
        <a href on:click|preventDefault={remove(todo)}>[x]</a>
    </li>
    {/each}
</ul>

{#if active}
    Edit: <input type="text" bind:value={active.name} />
{:else}
    Select item, total {todos.length}.
{/if}